(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(1),a=t(14),u=t.n(a),o=t(3),r=t(0),i=function(e){return Object(r.jsxs)("form",{onSubmit:e.addName,children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(r.jsxs)("div",{children:["number: ",Object(r.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})},s=t(4),l=t.n(s),d="/api/persons",j=function(){return l.a.get(d)},b=function(e){return l.a.post(d,e)},h=function(e){return l.a.delete("".concat(d,"/").concat(e))},m=function(e,n){return l.a.put("".concat(d,"/").concat(e),n)},f=function(e){var n=e.person,t=e.remove;return Object(r.jsxs)("div",{children:[n.name," ",n.number," ",Object(r.jsx)("button",{onClick:t,children:"Delete"})]})},O=function(e){var n=e.nameFind,t=e.handleSearch;return Object(r.jsxs)("div",{children:["filter shown with ",Object(r.jsx)("input",{value:n,onChange:t})]})},v=function(e){var n=e.message;return null===n?null:n.includes("Added")||n.includes("Updated")?Object(r.jsx)("div",{className:"success",children:n}):Object(r.jsx)("div",{className:"error",children:n})},p=function(){var e=Object(c.useState)([]),n=Object(o.a)(e,2),t=n[0],a=n[1],u=Object(c.useState)(""),s=Object(o.a)(u,2),l=s[0],d=s[1],p=Object(c.useState)([]),x=Object(o.a)(p,2),g=x[0],w=x[1],N=Object(c.useState)(""),C=Object(o.a)(N,2),S=C[0],k=C[1],D=Object(c.useState)(""),T=Object(o.a)(D,2),y=T[0],A=T[1],E=Object(c.useState)(null),L=Object(o.a)(E,2),F=L[0],J=L[1];Object(c.useEffect)((function(){j().then((function(e){a(e.data)}))}),[]);var U=Object(c.useState)(!1),B=Object(o.a)(U,2),I=B[0],P=(B[1],I?t:t.filter((function(e){return e.name.toLowerCase().includes(y.toLowerCase())})));return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(v,{message:F}),Object(r.jsx)(O,{nameFind:y,handleSearch:function(e){e.preventDefault();var n,c=[];for(n=0;n<t.length;n++)t[n].name.toLowerCase().includes(e.target.value)?(A(e.target.value),c=c.concat(t[n])):A(e.target.value)}}),Object(r.jsx)("h2",{children:"Add a new"}),Object(r.jsx)(i,{addName:function(e){e.preventDefault();var n=!1,c="";if(t.forEach((function(e){e.name===l&&(n=!0,c=e.id)})),n){if(window.confirm("".concat(l," is already added to phonebook, replace the old number with a new one?"))){var u={name:l,number:S,id:c};m(c,u).then((function(e){n=!1,a(t.map((function(e){return e.name!==l?e:u}))),w(g.concat(l)),J("Updated ".concat(u.name)),setTimeout((function(){J(null)}),5e3)}))}}else{var o={name:l,number:S};b(o).then((function(e){a(t.concat(o)),w(g.concat(l)),J("Added ".concat(o.name)),setTimeout((function(){J(null)}),5e3)})).catch((function(e){console.log(e.response.data),J("".concat(e.response.data.error)),setTimeout((function(){J(null)}),5e3)}))}d(""),k("")},newName:l,handleNameChange:function(e){d(e.target.value)},newNumber:S,handleNumberChange:function(e){k(e.target.value)}}),Object(r.jsx)("h2",{children:"Numbers"}),P.map((function(e){return Object(r.jsx)(f,{person:e,remove:function(){return function(e){j().then((function(n){window.confirm("Delete ".concat(e.name,"?"))&&(h(e.id),a(t.filter((function(n){return n.id!==e.id}))),J("Deleted ".concat(e.name)),setTimeout((function(){J(null)}),5e3))})),j((function(e){return console.log(e.data)}))}(e)}},e.name)}))]})};t(38);u.a.render(Object(r.jsx)(p,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.342c355c.chunk.js.map